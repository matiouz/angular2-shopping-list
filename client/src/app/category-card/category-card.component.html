<div class="category">
  @if (isEditionMode) {
    <span class="categoryName">
      <input [(ngModel)]="category.name" (blur)="saveCategory()" style="width: 120" />
    </span>
    <span>
      <button class="default-button" (click)="deleteCategory()">✗</button>
      <button class="default-button" (click)="moveCategoryUp()">↑</button>
      <button class="default-button" (click)="moveCategoryDown()">↓</button>
    </span>
  } @else {
    <span class="categoryName">{{ category.name }}</span>
  }
</div>

@for (currentItem of category.items; track currentItem.name; let i = $index) {
  @if (isDisplayNotNeededItems || currentItem.isNeeded) {
    <!-- we can't use currentItem in the two way binding because it's readonly, so we use category.items[i] instead -->
    <!-- we use 2 ways binding using [(item)], and in addition, since we want to add a custom behaviour when item is changed, we set (itemChange) -->
    <app-item-card
      [(item)]="category.items[i]"
      (itemChange)="itemUpdated($event)"
      (deleteItemEvt)="deleteItem($event)"
      (moveItemUpEvt)="moveItemUp($event)"
      (moveItemDownEvt)="moveItemDown($event)"
      [isEditionMode]="isEditionMode"
    ></app-item-card>
  }
} @empty {
  No item
}
